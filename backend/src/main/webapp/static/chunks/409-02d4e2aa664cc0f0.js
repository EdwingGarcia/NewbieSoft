"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{1761:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(1847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1847:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(2115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},i=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:r,...l,width:s,height:s,stroke:t,strokeWidth:o?24*Number(n)/Number(s):n,className:i("lucide",c),...!d&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),o=(e,r)=>{let t=(0,a.forwardRef)((t,l)=>{let{className:o,...c}=t;return(0,a.createElement)(n,{ref:l,iconNode:r,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return t.displayName=s(e),t}},2875:(e,r,t)=>{t.d(r,{i:()=>l});var a=t(1733);let s="".concat(a.JR,"/api/catalogo"),i=()=>{let e=localStorage.getItem("token");if(!e)throw Error("No hay token de autenticaci\xf3n");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},l={listar:async e=>{let r=e?"".concat(s,"?search=").concat(encodeURIComponent(e)):s,t=await fetch(r,{headers:i()});if(!t.ok)throw Error("Error al obtener el cat\xe1logo");return t.json()},crear:async e=>{let r=await fetch(s,{method:"POST",headers:i(),body:JSON.stringify(e)});if(!r.ok)throw Error("Error al crear \xedtem de cat\xe1logo");return r.json()},actualizar:async(e,r)=>{let t=await fetch("".concat(s,"/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(r)});if(!t.ok)throw Error("Error al actualizar \xedtem de cat\xe1logo");return t.json()},eliminar:async e=>{if(!(await fetch("".concat(s,"/").concat(e),{method:"DELETE",headers:i()})).ok)throw Error("Error al eliminar \xedtem de cat\xe1logo")}}},4409:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var a=t(5155),s=t(2115),i=t(2875),l=t(7003);function n(e){let{items:r,loading:t,onEditar:s,onEliminar:i}=e;return t?(0,a.jsx)("p",{children:"Cargando..."}):0===r.length?(0,a.jsx)("p",{children:"No hay registros"}):(0,a.jsxs)("table",{className:"w-full border border-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 text-left",children:"Tipo"}),(0,a.jsx)("th",{className:"p-2 text-left",children:"Descripci\xf3n"}),(0,a.jsx)("th",{className:"p-2 text-left",children:"Costo"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"p-2",children:e.tipo}),(0,a.jsx)("td",{className:"p-2",children:e.descripcion}),(0,a.jsxs)("td",{className:"p-2",children:["$",e.costo.toFixed(2)]}),(0,a.jsxs)("td",{className:"p-2 text-center space-x-2",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>s(e),children:"Editar"}),(0,a.jsx)(l.$,{variant:"destructive",onClick:()=>i(e.id),children:"Eliminar"})]})]},e.id))})]})}var o=t(6170),c=t(1761);function d(e){let{item:r,onSaved:t}=e,[n,d]=(0,s.useState)((null==r?void 0:r.tipo)||"PRODUCTO"),[u,h]=(0,s.useState)((null==r?void 0:r.descripcion)||""),[m,p]=(0,s.useState)((null==r?void 0:r.costo)||""),x=async()=>{let e=Number(m);if(!u||e<=0)return void alert("Complete todos los campos correctamente");let a={tipo:n,descripcion:u,costo:e};try{r?await i.i.actualizar(r.id,a):await i.i.crear(a),t()}catch(e){console.error("Error al guardar",e)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Tipo"}),(0,a.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"w-full border border-input bg-background p-2 rounded-md text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[(0,a.jsx)("option",{value:"PRODUCTO",children:"Producto"}),(0,a.jsx)("option",{value:"SERVICIO",children:"Servicio"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Descripci\xf3n"}),(0,a.jsx)(o.p,{placeholder:"Ej: Servicio T\xe9cnico",value:u,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1 block",children:"Costo / Precio"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.p,{type:"number",placeholder:"0.00",className:"pl-9",value:m,min:"0",step:"0.01",onChange:e=>p(e.target.value),onWheel:e=>e.currentTarget.blur()})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(l.$,{onClick:x,className:"w-full",children:r?"Actualizar \xcdtem":"Crear \xcdtem"})})]})}function u(e){let{item:r,onClose:t,onSaved:s}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-md w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:r?"Editar \xedtem":"Nuevo \xedtem"}),(0,a.jsx)(d,{item:r,onSaved:s}),(0,a.jsx)("div",{className:"mt-4 text-right",children:(0,a.jsx)("button",{onClick:t,className:"text-sm text-gray-500",children:"Cancelar"})})]})})}let h=(0,t(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var m=t(6191),p=t(6651),x=t(9559);function g(){let[e,r]=(0,s.useState)([]),[t,c]=(0,s.useState)(""),[d,g]=(0,s.useState)(!1),[v,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),w=async()=>{try{g(!0);let e=await i.i.listar(t);r(e)}catch(e){alert("Error al cargar cat\xe1logo")}finally{g(!1)}};(0,s.useEffect)(()=>{w()},[]);let y=async e=>{if(confirm("\xbfEst\xe1s seguro de eliminar este \xedtem?"))try{await i.i.eliminar(e),w()}catch(e){alert("No se pudo eliminar")}};return(0,a.jsx)("div",{className:"min-h-full h-full bg-gradient-to-br from-slate-50 to-purple-50/30 p-6 lg:p-8",children:(0,a.jsxs)("div",{className:"h-full space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between rounded-xl border border-purple-100 bg-white px-5 py-4 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(h,{className:"h-6 w-6 text-purple-600"}),"Cat\xe1logo de Productos"]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-purple-600 font-medium",children:"Gestiona los productos y servicios disponibles en el sistema."})]}),(0,a.jsxs)(l.$,{onClick:()=>{j(null),f(!0)},className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 shadow-md shadow-purple-500/25",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Nuevo \xcdtem"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center justify-between rounded-lg border border-purple-100 bg-white p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(p.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-purple-400"}),(0,a.jsx)(o.p,{placeholder:"Buscar por c\xf3digo o descripci\xf3n...",value:t,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w()},className:"pl-9 bg-purple-50/50 border-purple-200 focus-visible:ring-purple-400"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>w(),disabled:d,className:"border-purple-200 text-purple-600 hover:bg-purple-50",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 ".concat(d?"animate-spin":"")}),"Actualizar"]}),(0,a.jsx)(l.$,{onClick:()=>w(),className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Buscar"})]})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-purple-100 bg-white shadow-sm flex-1",children:0!==e.length||d?(0,a.jsx)(n,{items:e,loading:d,onEditar:e=>{j(e),f(!0)},onEliminar:y}):(0,a.jsx)("div",{className:"p-10 text-center text-slate-500",children:"No se encontraron productos."})}),v&&(0,a.jsx)(u,{item:b,onClose:()=>f(!1),onSaved:()=>{f(!1),w()}})]})})}},5016:(e,r,t)=>{t.d(r,{cn:()=>i});var a=t(2821),s=t(5889);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},6170:(e,r,t)=>{t.d(r,{p:()=>i});var a=t(5155);t(2115);var s=t(5016);function i(e){let{className:r,type:t,...i}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-white text-slate-900 px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 disabled:text-slate-600 disabled:bg-slate-100 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","dark:bg-slate-800 dark:text-slate-100 dark:disabled:bg-slate-700 dark:disabled:text-slate-300",r),...i})}},7003:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(5155);t(2115);var s=t(2467),i=t(3101),l=t(5016);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:r,variant:t,size:i,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,l.cn)(n({variant:t,size:i,className:r})),...c})}},9559:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(1847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}}]);