"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{2875:(e,a,s)=>{s.d(a,{i:()=>o});var r=s(1733);let t="".concat(r.JR,"/api/catalogo"),l=()=>{let e=localStorage.getItem("token");if(!e)throw Error("No hay token de autenticaci\xf3n");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},o={listar:async e=>{let a=e?"".concat(t,"?search=").concat(encodeURIComponent(e)):t,s=await fetch(a,{headers:l()});if(!s.ok)throw Error("Error al obtener el cat\xe1logo");return s.json()},crear:async e=>{let a=await fetch(t,{method:"POST",headers:l(),body:JSON.stringify(e)});if(!a.ok)throw Error("Error al crear \xedtem de cat\xe1logo");return a.json()},actualizar:async(e,a)=>{let s=await fetch("".concat(t,"/").concat(e),{method:"PUT",headers:l(),body:JSON.stringify(a)});if(!s.ok)throw Error("Error al actualizar \xedtem de cat\xe1logo");return s.json()},eliminar:async e=>{if(!(await fetch("".concat(t,"/").concat(e),{method:"DELETE",headers:l()})).ok)throw Error("Error al eliminar \xedtem de cat\xe1logo")}}},3209:(e,a,s)=>{s.d(a,{BT:()=>n,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>o,wL:()=>d});var r=s(5155);s(2115);var t=s(5016);function l(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function o(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function i(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",a),...s})}function n(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",a),...s})}function c(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",a),...s})}function d(e){let{className:a,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",a),...s})}},5016:(e,a,s)=>{s.d(a,{cn:()=>l});var r=s(2821),t=s(5889);function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.QP)((0,r.$)(a))}},5724:(e,a,s)=>{s.d(a,{A:()=>n});var r=s(5155),t=s(2115),l=s(5299),o=s(3540),i=s(1733);function n(e){let{src:a,alt:s,className:n,...c}=e,[d,u]=(0,t.useState)(null),[x,m]=(0,t.useState)(!0),[h,p]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{let e=!0,s=async()=>{try{m(!0),p(!1);let s=localStorage.getItem("token");if(!s)throw Error("No token");let r=a.startsWith("http")?a:"".concat(i.JR).concat(a),t=await fetch(r,{headers:{Authorization:"Bearer ".concat(s)}});if(!t.ok)throw Error("Error cargando imagen");let l=await t.blob(),o=URL.createObjectURL(l);e&&(u(o),m(!1))}catch(a){console.error(a),e&&(p(!0),m(!1))}};return a&&s(),()=>{e=!1,d&&URL.revokeObjectURL(d)}},[a]),x)?(0,r.jsx)("div",{className:"flex items-center justify-center bg-slate-100 ".concat(n),children:(0,r.jsx)(l.A,{className:"h-4 w-4 animate-spin text-slate-400"})}):h||!d?(0,r.jsx)("div",{className:"flex items-center justify-center bg-slate-100 text-slate-400 ".concat(n),children:(0,r.jsx)(o.A,{className:"h-5 w-5"})}):(0,r.jsx)("img",{src:d,alt:s,className:n,...c})}},6109:(e,a,s)=>{s.d(a,{A:()=>J});var r=s(5155),t=s(2115),l=s(7003),o=s(6170),i=s(6154),n=s(5299),c=s(4033),d=s(6651),u=s(7066),x=s(9708),m=s(1190),h=s(887),p=s(3842),b=s(5229),g=s(6989),f=s(3327),v=s(5707),j=s(1929),N=s(523),w=s(3779),y=s(3166),C=s(7910),A=s(6482),S=s(9451),E=s(5275),k=s(2864),q=s(1613),M=s(5710),T=s(6046),z=s(2516),F=s(6132),R=s(1733);let I="".concat(R.JR,"/api/fichas"),L="".concat(R.JR,"/api/equipos"),O=e=>{if(!e)return null;let a=e.match(/(\d+)/);return a?parseInt(a[1],10):null},P=(e,a)=>{if(!e)return null;let s=e.toLowerCase();return!!s.includes(a.toLowerCase())||!(s.includes("no")||s.includes("deshabilitado")||s.includes("disabled"))&&null},D=["cpuNombre","cpuNucleos","cpuLogicos","cpuPaquetesFisicos","cpuFrecuenciaOriginalMhz","ramCapacidadGb","ramFrecuenciaMhz","ramTecnologiaModulo","ramTipo","ramNumeroModulo","ramSerieModulo","ramFechaFabricacion","ramLugarFabricacion","discoModelo","discoNumeroSerie","discoTipo","discoCapacidadMb","discoCapacidadStr","discoRpm","discoLetras","discoWwn","discoTemperatura","discoHorasEncendido","discoSectoresReasignados","discoSectoresPendientes","discoErroresLectura","discoErrorCrc","mainboardModelo","chipset","pciExpressVersion","usbVersion","gpuNombre","adaptadorRed","macAddress","wifiLinkSpeedActual","wifiLinkSpeedMax","biosFabricante","biosVersion","biosFechaStr","biosEsUefiCapaz","arranqueUefiPresente","secureBootActivo","tpmPresente","tpmVersion","hvciEstado","monitorNombre","monitorModelo","audioAdaptador","audioCodec","audioHardwareId","soDescripcion","soProveedor","equipoNombre","equipoMarca","equipoModelo","equipoSerie"],B=e=>{let{title:a,subtitle:s,icon:t,iconColor:l="text-slate-500",badge:o,badgeColor:i="bg-slate-100 text-slate-600",children:n}=e;return(0,r.jsxs)("section",{className:"group rounded-xl border border-slate-200 bg-gradient-to-br from-white to-slate-50/80 dark:from-slate-900 dark:to-slate-800/50 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3 bg-gradient-to-r from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 border-b border-slate-100 dark:border-slate-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[t&&(0,r.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-lg bg-gradient-to-br from-slate-100 to-slate-50 dark:from-slate-700 dark:to-slate-800 shadow-sm ".concat(l),children:(0,r.jsx)(t,{className:"h-3.5 w-3.5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xs font-semibold tracking-wide text-slate-700 dark:text-slate-100",children:a}),s&&(0,r.jsx)("p",{className:"text-[10px] text-slate-400 mt-0.5",children:s})]})]}),o&&(0,r.jsx)("span",{className:"text-[10px] font-medium px-2 py-0.5 rounded-full ".concat(i),children:o})]}),(0,r.jsx)("div",{className:"px-4 py-3 space-y-3",children:n})]})},V=e=>{let{label:a,isAuto:s,required:t}=e;return(0,r.jsxs)("label",{className:"flex items-center gap-1.5 text-[11px] font-semibold text-slate-600 mb-1",children:[a,t&&(0,r.jsx)("span",{className:"text-rose-500",children:"*"}),s&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-[9px] font-medium text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full",children:[(0,r.jsx)(i.A,{className:"h-2.5 w-2.5"}),"Auto"]})]})},H=e=>{let{value:a,onChange:s,disabled:t}=e;return(0,r.jsxs)("select",{className:"border border-slate-200 rounded-lg px-3 h-9 w-full text-xs bg-white text-slate-900 hover:border-slate-300 focus:border-slate-400 focus:ring-1 focus:ring-slate-400/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 disabled:text-slate-600",value:null===a?"":a?"true":"false",onChange:e=>s(""===e.target.value?null:"true"===e.target.value),disabled:t,children:[(0,r.jsx)("option",{value:"",children:"Sin especificar"}),(0,r.jsx)("option",{value:"true",children:"✓ S\xed"}),(0,r.jsx)("option",{value:"false",children:"✗ No"})]})},U=e=>{let{value:a,onChange:s,disabled:l,isLoading:o=!1,initialDisplay:i}=e,[u,x]=(0,t.useState)([]),[m,h]=(0,t.useState)(!1),[p,b]=(0,t.useState)(!1),[g,f]=(0,t.useState)(""),v=(0,t.useRef)(null),j=(0,t.useRef)(null),N=localStorage.getItem("token");(0,t.useEffect)(()=>{let e=async()=>{if(N){h(!0);try{let e=await fetch(L,{headers:{Authorization:"Bearer ".concat(N)}});if(e.ok){let a=await e.json();x(Array.isArray(a)?a:[])}}catch(e){console.error("Error cargando equipos:",e)}finally{h(!1)}}};l||e()},[N,l]),(0,t.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let w=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",y=u.filter(e=>{if(!g.trim())return!0;let a=w(g);return w(e.modelo).includes(a)||w(e.marca).includes(a)||w(e.numeroSerie).includes(a)||w(e.hostname).includes(a)||w(e.tipo).includes(a)||String(e.idEquipo).includes(a)}),C=u.find(e=>e.idEquipo===a),A=()=>C?(e=>{let a=[e.marca,e.modelo,e.numeroSerie?"(S/N: ".concat(e.numeroSerie,")"):null,e.hostname?"[".concat(e.hostname,"]"):null].filter(Boolean);return a.length>0?a.join(" "):"Equipo #".concat(e.idEquipo)})(C):i&&a?i:a?"Equipo ID: ".concat(a):"Seleccionar equipo...";return l?(0,r.jsx)("div",{className:"h-8 px-3 flex items-center bg-slate-100 border rounded-md text-xs text-slate-600 cursor-not-allowed opacity-80 select-none",children:(0,r.jsx)("span",{className:"truncate font-medium",children:o?"Cargando...":A()})}):(0,r.jsxs)("div",{ref:v,className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{b(!p),p||setTimeout(()=>{var e;return null==(e=j.current)?void 0:e.focus()},100)},disabled:o||m,className:"h-8 w-full px-3 flex items-center justify-between bg-white border rounded-md text-xs text-slate-700 hover:border-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)("span",{className:"truncate",children:o||m?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.A,{className:"h-3 w-3 animate-spin"}),"Cargando..."]}):A()}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-slate-400 transition-transform ".concat(p?"rotate-180":"")})]}),p&&!o&&!m&&(0,r.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border border-slate-200 rounded-lg shadow-lg max-h-72 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-2 border-b border-slate-100",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.A,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-slate-400"}),(0,r.jsx)("input",{ref:j,type:"text",placeholder:"Buscar por serie, modelo, hostname...",value:g,onChange:e=>f(e.target.value),className:"w-full h-8 pl-8 pr-3 text-xs border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-slate-400"})]})}),(0,r.jsx)("div",{className:"max-h-52 overflow-y-auto",children:0===y.length?(0,r.jsx)("div",{className:"py-4 text-center text-xs text-slate-500",children:"No se encontraron equipos"}):y.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>(e=>{s(e.idEquipo,e),b(!1),f("")})(e),className:"w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-50 last:border-0 ".concat(a===e.idEquipo?"bg-slate-100":""),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("p",{className:"text-xs font-medium text-slate-800 truncate",children:[e.marca," ",e.modelo]}),(0,r.jsxs)("p",{className:"text-[10px] text-slate-500 truncate",children:[e.tipo&&(0,r.jsx)("span",{className:"mr-2",children:e.tipo}),e.numeroSerie&&(0,r.jsxs)("span",{className:"mr-2",children:["S/N: ",e.numeroSerie]}),e.hostname&&(0,r.jsxs)("span",{children:["[",e.hostname,"]"]})]})]}),(0,r.jsxs)("span",{className:"text-[10px] text-slate-400 shrink-0",children:["#",e.idEquipo]})]})},e.idEquipo))}),a&&(0,r.jsx)("div",{className:"p-2 border-t border-slate-100",children:(0,r.jsx)("button",{type:"button",onClick:()=>{s(null,null),f("")},className:"w-full text-xs text-rose-600 hover:text-rose-700 py-1",children:"Quitar selecci\xf3n"})})]})]})};function J(e){var a,s,c,d,R,J,_,G,W,$,Z,Q,X,K,Y,ee,ea,es,er,et,el,eo,ei,en,ec,ed,eu,ex,em,eh,ep,eb,eg,ef,ev,ej,eN,ew,ey,eC,eA,eS,eE,ek,eq,eM,eT,ez,eF,eR,eI,eL,eO,eP,eD,eB,eV;let{open:eH,fichaId:eU,onClose:eJ,onSaved:e_}=e,[eG,eW]=(0,t.useState)(!1),[e$,eZ]=(0,t.useState)(null),[eQ,eX]=(0,t.useState)(!1),[eK,eY]=(0,t.useState)(!1),[e0,e2]=(0,t.useState)(null),[e1,e5]=(0,t.useState)(null),[e4,e3]=(0,t.useState)(!1),[e9,e6]=(0,t.useState)(!1),[e7,e8]=(0,t.useState)(!1),ae=!!(eU&&eU>0),aa=(null==e1?void 0:e1.estado)==="CERRADA",as=aa&&!e4,ar=localStorage.getItem("token"),at=(e,a)=>{(!aa||e4)&&e5(s=>s?{...s,[e]:a}:s)},al=async(e,a)=>{if(!ae&&(!aa||e4)){if(console.log("\uD83D\uDCDD Cambio de equipo:",{equipoId:e,tengoData:!!a}),null===e)return void e5(e=>e?{...e,equipoId:null}:e);if(e5(s=>s?{...s,equipoId:e,equipoNombre:(null==a?void 0:a.hostname)||null,equipoMarca:(null==a?void 0:a.marca)||null,equipoModelo:(null==a?void 0:a.modelo)||null,equipoSerie:(null==a?void 0:a.numeroSerie)||null,soDescripcion:(null==a?void 0:a.sistemaOperativo)||null,clienteId:!s.clienteId&&(null==a?void 0:a.propietario)?a.propietario:s.clienteId}:s),ar){console.log("\uD83D\uDD0D Obteniendo datos completos del equipo:",e),eY(!0);try{let a=await fetch("".concat(L,"/").concat(e),{headers:{Authorization:"Bearer ".concat(ar)}});if(a.ok){let e=await a.json(),s=e.hardwareJson;s&&(console.log("✅ Hardware JSON encontrado, auto-rellenando campos...",s),e5(a=>{var r,t,l,o,i,n,c,d,u,x,m,h,p;return a?{...a,cpuNombre:s["Nombre del procesador"]||a.cpuNombre,cpuNucleos:null!=(t=O(s["N\xfamero de n\xfacleos de procesador"]))?t:a.cpuNucleos,cpuLogicos:null!=(l=O(s["N\xfamero de procesadores l\xf3gicos"]))?l:a.cpuLogicos,cpuPaquetesFisicos:null!=(o=O(s["N\xfamero de paquetes de procesador (f\xedsicos)"]))?o:a.cpuPaquetesFisicos,cpuFrecuenciaOriginalMhz:null!=(i=O(s["Original Processor Frequency [MHz]"]))?i:a.cpuFrecuenciaOriginalMhz,ramCapacidadGb:null!=(n=O(s["Tama\xf1o del m\xf3dulo"]))?n:a.ramCapacidadGb,ramTecnologiaModulo:s["Tipo de m\xf3dulo"]||a.ramTecnologiaModulo,ramTipo:s["Tipo de memoria"]||a.ramTipo,ramNumeroModulo:null!=(c=O(s["N\xfamero de m\xf3dulo"]))?c:a.ramNumeroModulo,ramSerieModulo:s["N\xfamero de serie del m\xf3dulo"]||a.ramSerieModulo,ramFechaFabricacion:s["Fecha de fabricaci\xf3n del m\xf3dulo"]||a.ramFechaFabricacion,ramLugarFabricacion:s["Ubicaci\xf3n de fabricaci\xf3n del m\xf3dulo"]||a.ramLugarFabricacion,discoModelo:s["Modelo de unidad"]||a.discoModelo,discoNumeroSerie:s["N\xfamero de serie de la unidad"]||a.discoNumeroSerie,discoCapacidadMb:null!=(d=O(s["Drive Capacity [MB]"]))?d:a.discoCapacidadMb,discoCapacidadStr:s["Capacidad de la unidad"]||a.discoCapacidadStr,discoRpm:null!=(u=O(s["Tasa de rotaci\xf3n de medios"]))?u:a.discoRpm,discoLetras:s["Drive Letter(s)"]||a.discoLetras,discoWwn:s["Nombre mundial (WWN)"]||a.discoWwn,discoTemperatura:s["[C2] Temperatura"]||a.discoTemperatura,discoHorasEncendido:s["[09] N\xfamero de ciclos/horas de encendido"]||a.discoHorasEncendido,discoSectoresReasignados:s["[05] Reasignado el conteo del sector"]||a.discoSectoresReasignados,discoSectoresPendientes:s["[C5] Recuento actual de sectores pendientes"]||a.discoSectoresPendientes,discoErroresLectura:s["[01] Tasa de errores en la lectura"]||a.discoErroresLectura,discoErrorCrc:s["[C7] Tasa de error UltraDMA/SATA CRC"]||a.discoErrorCrc,mainboardModelo:s["Modelo de placa base"]||a.mainboardModelo,chipset:s["Chipset de la placa base"]||a.chipset,pciExpressVersion:s["Versi\xf3n de PCI Express admitida"]||a.pciExpressVersion,usbVersion:s["Versi\xf3n USB admitida"]||a.usbVersion,gpuNombre:s["Tarjeta grafica"]||a.gpuNombre,adaptadorRed:s["Tarjeta de red"]||a.adaptadorRed,macAddress:s["Direcci\xf3n MAC"]||a.macAddress,wifiLinkSpeedActual:s["Velocidad de enlace actual"]||a.wifiLinkSpeedActual,wifiLinkSpeedMax:s["Velocidad m\xe1xima de enlace"]||a.wifiLinkSpeedMax,biosFabricante:s["Fabricante de BIOS"]||a.biosFabricante,biosVersion:s["Versi\xf3n de BIOS"]||a.biosVersion,biosFechaStr:s["Fecha de BIOS (mm/dd/yyyy)"]||a.biosFechaStr,biosEsUefiCapaz:null!=(x=P(s["UEFI BIOS"],"Capaz"))?x:a.biosEsUefiCapaz,arranqueUefiPresente:null!=(m=P(s["Arranque UEFI"],"Presente"))?m:a.arranqueUefiPresente,secureBootActivo:null!=(h=P(s["Arranque seguro"],"Activado"))?h:a.secureBootActivo,tpmPresente:null!=(p=null==(r=s["Chip del m\xf3dulo de plataforma segura (TPM)"])?void 0:r.toLowerCase().includes("present"))?p:a.tpmPresente,tpmVersion:(e=>{if(!e)return null;let a=e.toLowerCase().indexOf("version");return a>=0?e.substring(a).replace(/version/i,"").trim():e})(s["Chip del m\xf3dulo de plataforma segura (TPM)"])||a.tpmVersion,hvciEstado:s["Integridad de c\xf3digo protegida por hipervisor (HVCI)"]||a.hvciEstado,monitorNombre:s["Nombre del monitor"]||a.monitorNombre,monitorModelo:s["Nombre del monitor (del fabricante)"]||a.monitorModelo,audioAdaptador:s["Adaptador de sonido"]||a.audioAdaptador,audioCodec:s["C\xf3dec de audio de alta definici\xf3n"]||a.audioCodec,audioHardwareId:s["ID de hardware del c\xf3dec de audio"]||a.audioHardwareId,soDescripcion:s["Sistema operativo"]||a.soDescripcion,soProveedor:s["Descripci\xf3n del proveedor"]||a.soProveedor,equipoNombre:s["Nombre del computadora"]||a.equipoNombre,equipoMarca:e.marca||a.equipoMarca,equipoModelo:e.modelo||a.equipoModelo,equipoSerie:e.numeroSerie||a.equipoSerie,clienteId:e.cedulaCliente||a.clienteId,tecnicoId:e.tecnicoCedula||a.tecnicoId}:a}))}console.log("\uD83D\uDD0D Buscando ficha t\xe9cnica anterior del equipo:",e);let s=await fetch("".concat(I,"/equipo/").concat(e),{headers:{Authorization:"Bearer ".concat(ar)}});if(s.ok){let a=await s.json(),r=Array.isArray(a)&&a.length>0?a[a.length-1]:a;r&&r.id&&(console.log("\uD83D\uDCCB Ficha anterior encontrada, completando campos faltantes..."),e5(a=>{if(!a)return a;let s={...a};return D.forEach(e=>{let a=s[e],t=r[e];(null==a||""===a)&&null!=t&&(s[e]=t)}),s.equipoId=e,s}))}}catch(e){console.error("❌ Error al cargar datos del equipo:",e)}finally{eY(!1)}}}},ao=(0,t.useCallback)(async()=>{if(eU&&ar){eW(!0),eZ(null);try{let e=await fetch("".concat(I,"/").concat(eU),{headers:{Authorization:"Bearer ".concat(ar)}});if(!e.ok)throw Error("Error al cargar ficha (HTTP ".concat(e.status,")"));let a=await e.json();e2(a),e5(a)}catch(a){var e;eZ(null!=(e=a.message)?e:"Error al cargar la ficha t\xe9cnica")}finally{eW(!1)}}},[eU,ar]);(0,t.useEffect)(()=>{eH?eU?ao():(e5({}),e2(null),eZ(null)):(e2(null),e5(null),eZ(null))},[eH,eU,ao]),(0,t.useEffect)(()=>{if(!eH)return;let e=e=>{"Escape"===e.key&&eJ()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[eH,eJ]);let ai=async(e,a)=>{if(null==e||e.preventDefault(),!e1||!ar)return;let s=e1.equipoId,r=e1.id?"PUT":"POST",t=e1.id?"".concat(I,"/").concat(e1.id):I,l=a?{...e1,estado:a}:e1;try{var o;eX(!0);let e=await fetch(t,{method:r,headers:{Authorization:"Bearer ".concat(ar),"Content-Type":"application/json"},body:JSON.stringify(l)});if(!e.ok){let a=await e.text();throw Error("Error al guardar (HTTP ".concat(e.status,"): ").concat(a))}let i=await e.json(),n={...i,equipoId:null!=(o=i.equipoId)?o:s};e2(n),e5(n),"CERRADA"===a&&e3(!1),alert("CERRADA"===a?"✅ Ficha t\xe9cnica cerrada correctamente":"✅ Ficha t\xe9cnica guardada como borrador"),null==e_||e_()}catch(e){console.error("❌ Error al guardar:",e),alert("❌ "+(e.message||"Error desconocido"))}finally{eX(!1)}};return eH?(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",onMouseDown:e=>{e.target===e.currentTarget&&eJ()},children:(0,r.jsxs)("div",{className:"relative mx-3 flex h-[92vh] w-full max-w-7xl flex-col overflow-hidden rounded-2xl border border-slate-200/50 bg-white shadow-2xl",children:[(0,r.jsx)("header",{className:"sticky top-0 z-20 border-b border-slate-700/50 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg shadow-blue-500/20",children:(0,r.jsx)(u.A,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white",children:eG?"Cargando...":ae?"Ficha T\xe9cnica #".concat(null==e1?void 0:e1.id):"Nueva Ficha T\xe9cnica"}),aa?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-500/20 px-2.5 py-0.5 text-[10px] font-semibold text-green-300 border border-green-500/30",children:[(0,r.jsx)(x.A,{className:"h-3 w-3"}),"Cerrada"]}):ae?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-amber-500/20 px-2.5 py-0.5 text-[10px] font-semibold text-amber-300 border border-amber-500/30",children:[(0,r.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-400 animate-pulse"}),"Borrador"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-indigo-500/20 px-2.5 py-0.5 text-[10px] font-semibold text-indigo-300 border border-indigo-500/30",children:[(0,r.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-indigo-400"}),"Nuevo"]}),aa&&!e4&&(0,r.jsx)("button",{onClick:()=>{e6(!0)},className:"ml-2 inline-flex h-7 w-7 items-center justify-center rounded-lg bg-amber-500/20 text-amber-300 hover:bg-amber-500/30 hover:text-amber-200 transition-all",title:"Habilitar edici\xf3n",children:(0,r.jsx)(m.A,{className:"h-3.5 w-3.5"})}),e4&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-amber-500/20 px-2.5 py-0.5 text-[10px] font-semibold text-amber-300 border border-amber-500/30",children:[(0,r.jsx)(m.A,{className:"h-3 w-3"}),"Modo Edici\xf3n"]})]}),(0,r.jsx)("p",{className:"text-[11px] text-slate-400 mt-0.5",children:ae&&(null==e1?void 0:e1.fechaCreacion)?"Creada el ".concat(new Date(e1.fechaCreacion).toLocaleString()):"Complete la informaci\xf3n del equipo para generar el diagn\xf3stico"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e1&&(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-3 mr-2",children:[e1.equipoId&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 bg-white/5 px-2.5 py-1.5 rounded-lg",children:[(0,r.jsx)(h.A,{className:"h-3.5 w-3.5"}),(0,r.jsxs)("span",{children:["Equipo #",e1.equipoId]})]}),e1.ordenTrabajoId&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 bg-white/5 px-2.5 py-1.5 rounded-lg",children:[(0,r.jsx)(p.A,{className:"h-3.5 w-3.5"}),(0,r.jsxs)("span",{children:["OT #",e1.ordenTrabajoId]})]})]}),(0,r.jsx)("button",{onClick:eJ,className:"inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/10 text-white/70 hover:bg-white/20 hover:text-white transition-all","aria-label":"Cerrar",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-slate-50 to-slate-100/50 p-5 scroll-smooth",children:eG?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-24",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-16 w-16 rounded-full border-4 border-slate-200 border-t-blue-500 animate-spin"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"h-6 w-6 text-slate-400"})})]}),(0,r.jsx)("p",{className:"mt-4 text-sm font-medium text-slate-600",children:"Cargando ficha t\xe9cnica..."}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Esto puede tomar un momento"})]}):e$?(0,r.jsxs)("div",{className:"mx-auto max-w-md rounded-2xl border border-rose-200 bg-gradient-to-br from-rose-50 to-red-50 p-6 text-center shadow-sm",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 rounded-full bg-rose-100 flex items-center justify-center mb-3",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-rose-500"})}),(0,r.jsx)("h3",{className:"text-sm font-semibold text-rose-800 mb-1",children:"Error al cargar"}),(0,r.jsx)("p",{className:"text-xs text-rose-600",children:e$}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",className:"mt-4 text-xs border-rose-300 text-rose-700 hover:bg-rose-100",onClick:eJ,children:"Cerrar"})]}):e1?(0,r.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"space-y-5",children:[as&&(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-100",children:(0,r.jsx)(x.A,{className:"h-5 w-5 text-green-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Ficha t\xe9cnica cerrada"}),(0,r.jsx)("p",{className:"text-xs text-green-600",children:"Esta ficha est\xe1 en modo solo lectura. Haz clic en el \xedcono de l\xe1piz en la cabecera para habilitar la edici\xf3n."})]})]}),(0,r.jsx)(B,{title:"Identificaci\xf3n de Ficha",subtitle:"Informaci\xf3n b\xe1sica del registro",icon:f.A,iconColor:"text-blue-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"ID ficha"}),(0,r.jsx)(o.p,{className:"h-9 bg-slate-50 text-xs border-slate-200",value:null!=(a=e1.id)?a:"(Nuevo)",disabled:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Fecha creaci\xf3n"}),(0,r.jsx)(o.p,{className:"h-9 bg-slate-50 text-xs border-slate-200",value:e1.fechaCreacion?new Date(e1.fechaCreacion).toLocaleString():new Date().toLocaleString(),disabled:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("label",{className:"text-[11px] font-semibold text-slate-600",children:"Equipo"}),ae?(0,r.jsx)("span",{className:"text-[9px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded-full",children:"Bloqueado"}):(0,r.jsxs)("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded-full flex items-center gap-0.5",children:[(0,r.jsx)(i.A,{className:"h-2.5 w-2.5"})," Autollenar"]})]}),(0,r.jsx)(U,{value:e1.equipoId,onChange:al,isLoading:eK,disabled:ae,initialDisplay:ae&&e1.equipoId?"".concat(e1.equipoMarca||""," ").concat(e1.equipoModelo||""," ").concat(e1.equipoSerie?"(S/N: ".concat(e1.equipoSerie,")"):""," ").concat(e1.equipoNombre?"[".concat(e1.equipoNombre,"]"):"").trim():null})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("label",{className:"text-[11px] font-semibold text-slate-600",children:"Orden Trabajo ID"}),(0,r.jsx)("span",{className:"text-[9px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded-full",children:"Solo lectura"})]}),(0,r.jsx)(o.p,{type:"number",className:"h-9 bg-slate-50 text-xs cursor-not-allowed border-slate-200",value:null!=(s=e1.ordenTrabajoId)?s:"",disabled:!0,title:"La orden de trabajo no se puede modificar"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"T\xe9cnico (c\xe9dula)"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",placeholder:"Ej: 1234567890",value:null!=(c=e1.tecnicoId)?c:"",onChange:e=>at("tecnicoId",e.target.value||null)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Cliente (c\xe9dula)"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",placeholder:"Ej: 1234567890",value:null!=(d=e1.clienteId)?d:"",onChange:e=>at("clienteId",e.target.value||null)})]})]})}),(0,r.jsx)(B,{title:"Observaciones Generales",subtitle:"Notas iniciales del equipo",icon:u.A,iconColor:"text-purple-500",children:(0,r.jsx)("textarea",{className:"w-full border border-slate-200 rounded-lg px-3 py-2.5 text-xs min-h-[80px] bg-white text-slate-900 placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400/30 focus-visible:border-blue-400 transition-all resize-none disabled:bg-slate-100 disabled:text-slate-600",value:null!=(R=e1.observaciones)?R:"",onChange:e=>at("observaciones",e.target.value),placeholder:"Estado general del equipo, comentarios del cliente, s\xedntomas iniciales, etc."})}),(0,r.jsx)(B,{title:"Procesador (CPU)",subtitle:"Especificaciones del procesador",icon:v.A,iconColor:"text-indigo-500",badge:"Hardware",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(V,{label:"Modelo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-indigo-400 focus:ring-indigo-400/20",value:null!=(J=e1.cpuNombre)?J:"",onChange:e=>at("cpuNombre",e.target.value),placeholder:"Ej: Intel Core i7-1165G7"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"N\xfacleos",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-indigo-400 focus:ring-indigo-400/20",value:null!=(_=e1.cpuNucleos)?_:"",onChange:e=>at("cpuNucleos",""===e.target.value?null:Number(e.target.value)),placeholder:"4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Hilos l\xf3gicos",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-indigo-400 focus:ring-indigo-400/20",value:null!=(G=e1.cpuLogicos)?G:"",onChange:e=>at("cpuLogicos",""===e.target.value?null:Number(e.target.value)),placeholder:"8"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Frecuencia (MHz)",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-indigo-400 focus:ring-indigo-400/20",value:null!=(W=e1.cpuFrecuenciaOriginalMhz)?W:"",onChange:e=>at("cpuFrecuenciaOriginalMhz",""===e.target.value?null:Number(e.target.value)),placeholder:"2800"})]})]})}),(0,r.jsx)(B,{title:"Memoria RAM",subtitle:"M\xf3dulos de memoria instalados",icon:j.A,iconColor:"text-violet-500",badge:"Hardware",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Capacidad (GB)",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=($=e1.ramCapacidadGb)?$:"",onChange:e=>at("ramCapacidadGb",""===e.target.value?null:Number(e.target.value)),placeholder:"16"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Frecuencia (MHz)",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=(Z=e1.ramFrecuenciaMhz)?Z:"",onChange:e=>at("ramFrecuenciaMhz",""===e.target.value?null:Number(e.target.value)),placeholder:"3200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Tipo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=(Q=e1.ramTipo)?Q:"",onChange:e=>at("ramTipo",e.target.value),placeholder:"DDR4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"N\xba m\xf3dulo",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=(X=e1.ramNumeroModulo)?X:"",onChange:e=>at("ramNumeroModulo",""===e.target.value?null:Number(e.target.value)),placeholder:"1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Serie m\xf3dulo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=(K=e1.ramSerieModulo)?K:"",onChange:e=>at("ramSerieModulo",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Tecnolog\xeda",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-violet-400 focus:ring-violet-400/20",value:null!=(Y=e1.ramTecnologiaModulo)?Y:"",onChange:e=>at("ramTecnologiaModulo",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"Almacenamiento",subtitle:"Disco duro o SSD del equipo",icon:N.A,iconColor:"text-emerald-500",badge:"Hardware",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Modelo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(ee=e1.discoModelo)?ee:"",onChange:e=>at("discoModelo",e.target.value),placeholder:"Samsung 970 EVO"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"N\xb0 serie",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(ea=e1.discoNumeroSerie)?ea:"",onChange:e=>at("discoNumeroSerie",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Tipo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(es=e1.discoTipo)?es:"",onChange:e=>at("discoTipo",e.target.value),placeholder:"SSD NVMe"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Capacidad (MB)",isAuto:!0}),(0,r.jsx)(o.p,{type:"number",className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(er=e1.discoCapacidadMb)?er:"",onChange:e=>at("discoCapacidadMb",""===e.target.value?null:Number(e.target.value)),placeholder:"512000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Temperatura",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(et=e1.discoTemperatura)?et:"",onChange:e=>at("discoTemperatura",e.target.value),placeholder:"45\xb0C"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Horas encendido",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(el=e1.discoHorasEncendido)?el:"",onChange:e=>at("discoHorasEncendido",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Sectores reasignados",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(eo=e1.discoSectoresReasignados)?eo:"",onChange:e=>at("discoSectoresReasignados",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Errores lectura",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-emerald-400 focus:ring-emerald-400/20",value:null!=(ei=e1.discoErroresLectura)?ei:"",onChange:e=>at("discoErroresLectura",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"Placa Base, GPU y Seguridad",subtitle:"Componentes principales",icon:w.A,iconColor:"text-cyan-500",badge:"Hardware",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Modelo mainboard",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-cyan-400 focus:ring-cyan-400/20",value:null!=(en=e1.mainboardModelo)?en:"",onChange:e=>at("mainboardModelo",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Chipset",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-cyan-400 focus:ring-cyan-400/20",value:null!=(ec=e1.chipset)?ec:"",onChange:e=>at("chipset",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"GPU",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-cyan-400 focus:ring-cyan-400/20",value:null!=(ed=e1.gpuNombre)?ed:"",onChange:e=>at("gpuNombre",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"TPM presente",isAuto:!0}),(0,r.jsx)(H,{value:e1.tpmPresente,onChange:e=>at("tpmPresente",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"TPM versi\xf3n",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-cyan-400 focus:ring-cyan-400/20",value:null!=(eu=e1.tpmVersion)?eu:"",onChange:e=>at("tpmVersion",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"Conectividad",subtitle:"Red e interfaz inal\xe1mbrica",icon:y.A,iconColor:"text-sky-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Adaptador red",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-sky-400 focus:ring-sky-400/20",value:null!=(ex=e1.adaptadorRed)?ex:"",onChange:e=>at("adaptadorRed",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"MAC Address",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-sky-400 focus:ring-sky-400/20 font-mono",value:null!=(em=e1.macAddress)?em:"",onChange:e=>at("macAddress",e.target.value),placeholder:"00:00:00:00:00:00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"WiFi funciona"}),(0,r.jsx)(H,{value:e1.wifiFunciona,onChange:e=>at("wifiFunciona",e)})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)(V,{label:"Observaciones WiFi"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-sky-400 focus:ring-sky-400/20",value:null!=(eh=e1.wifiObservaciones)?eh:"",onChange:e=>at("wifiObservaciones",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"BIOS / UEFI",subtitle:"Configuraci\xf3n de firmware",icon:C.A,iconColor:"text-orange-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"BIOS fabricante",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-orange-400 focus:ring-orange-400/20",value:null!=(ep=e1.biosFabricante)?ep:"",onChange:e=>at("biosFabricante",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"BIOS versi\xf3n",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-orange-400 focus:ring-orange-400/20",value:null!=(eb=e1.biosVersion)?eb:"",onChange:e=>at("biosVersion",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Secure Boot",isAuto:!0}),(0,r.jsx)(H,{value:e1.secureBootActivo,onChange:e=>at("secureBootActivo",e)})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)(V,{label:"Sistema Operativo",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-orange-400 focus:ring-orange-400/20",value:null!=(eg=e1.soDescripcion)?eg:"",onChange:e=>at("soDescripcion",e.target.value),placeholder:"Windows 11 Pro 64-bit"})]})]})}),(0,r.jsx)(B,{title:"Identificaci\xf3n del Equipo",subtitle:"Datos f\xedsicos y de etiquetado",icon:h.A,iconColor:"text-slate-600",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Hostname"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-slate-400 focus:ring-slate-400/20",value:null!=(ef=e1.equipoNombre)?ef:"",onChange:e=>at("equipoNombre",e.target.value),placeholder:"PC-OFICINA-01"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Marca"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-slate-400 focus:ring-slate-400/20",value:null!=(ev=e1.equipoMarca)?ev:"",onChange:e=>at("equipoMarca",e.target.value),placeholder:"HP, Dell, Lenovo..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Modelo"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-slate-400 focus:ring-slate-400/20",value:null!=(ej=e1.equipoModelo)?ej:"",onChange:e=>at("equipoModelo",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"N\xfamero de Serie"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-slate-400 focus:ring-slate-400/20 font-mono",value:null!=(eN=e1.equipoSerie)?eN:"",onChange:e=>at("equipoSerie",e.target.value)})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(V,{label:"Roturas o da\xf1os"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-slate-400 focus:ring-slate-400/20",value:null!=(ew=e1.equipoRoturas)?ew:"",onChange:e=>at("equipoRoturas",e.target.value),placeholder:"Describir da\xf1os visibles..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Tornillos faltantes"}),(0,r.jsx)(H,{value:e1.tornillosFaltantes,onChange:e=>at("tornillosFaltantes",e)})]})]})}),(0,r.jsx)(B,{title:"Carcasa y Perif\xe9ricos",subtitle:"Estado de carcasa, teclado y touchpad",icon:A.A,iconColor:"text-pink-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Estado carcasa"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-pink-400 focus:ring-pink-400/20",value:null!=(ey=e1.carcasaEstado)?ey:"",onChange:e=>at("carcasaEstado",e.target.value),placeholder:"Bueno, Regular, Malo"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(V,{label:"Observaciones carcasa"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-pink-400 focus:ring-pink-400/20",value:null!=(eC=e1.carcasaObservaciones)?eC:"",onChange:e=>at("carcasaObservaciones",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Estado teclado"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-pink-400 focus:ring-pink-400/20",value:null!=(eA=e1.tecladoEstado)?eA:"",onChange:e=>at("tecladoEstado",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Teclas da\xf1adas"}),(0,r.jsx)(H,{value:e1.tecladoTeclasDanadas,onChange:e=>at("tecladoTeclasDanadas",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Retroiluminaci\xf3n"}),(0,r.jsx)(H,{value:e1.tecladoRetroiluminacion,onChange:e=>at("tecladoRetroiluminacion",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Touchpad funciona"}),(0,r.jsx)(H,{value:e1.touchpadFunciona,onChange:e=>at("touchpadFunciona",e)})]})]})}),(0,r.jsx)(B,{title:"Pantalla y C\xe1mara",subtitle:"Estado del display y webcam",icon:S.A,iconColor:"text-teal-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Modelo monitor",isAuto:!0}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-teal-400 focus:ring-teal-400/20",value:null!=(eS=e1.monitorNombre)?eS:"",onChange:e=>at("monitorNombre",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Rayones"}),(0,r.jsx)(H,{value:e1.pantallaRayones,onChange:e=>at("pantallaRayones",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"P\xedxeles muertos"}),(0,r.jsx)(H,{value:e1.pantallaPixelesMuertos,onChange:e=>at("pantallaPixelesMuertos",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Pantalla t\xe1ctil"}),(0,r.jsx)(H,{value:e1.pantallaTactil,onChange:e=>at("pantallaTactil",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"C\xe1mara funciona"}),(0,r.jsx)(H,{value:e1.camaraFunciona,onChange:e=>at("camaraFunciona",e)})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)(V,{label:"Observaciones pantalla"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-teal-400 focus:ring-teal-400/20",value:null!=(eE=e1.pantallaObservaciones)?eE:"",onChange:e=>at("pantallaObservaciones",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"Puertos e Interfaces",subtitle:"Conectores disponibles",icon:E.A,iconColor:"text-purple-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[[["puertoUsb","USB"],["puertoVga","VGA"],["puertoEthernet","Ethernet"],["puertoHdmi","HDMI"],["puertoEntradaAudio","Audio In"],["puertoSalidaAudio","Audio Out"],["puertoMicroSd","MicroSD"],["puertoDvd","DVD/CD"]].map(e=>{let[a,s]=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:s}),(0,r.jsx)(H,{value:e1[a],onChange:e=>at(a,e)})]},a)}),(0,r.jsxs)("div",{className:"md:col-span-4",children:[(0,r.jsx)(V,{label:"Observaciones puertos"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-purple-400 focus:ring-purple-400/20",value:null!=(ek=e1.puertosObservaciones)?ek:"",onChange:e=>at("puertosObservaciones",e.target.value)})]})]})}),(0,r.jsx)(B,{title:"Bater\xeda y Cargador",subtitle:"Estado de alimentaci\xf3n",icon:k.A,iconColor:"text-lime-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"C\xf3digo bater\xeda"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-lime-400 focus:ring-lime-400/20 font-mono",value:null!=(eq=e1.bateriaCodigo)?eq:"",onChange:e=>at("bateriaCodigo",e.target.value)})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(V,{label:"Observaciones bater\xeda"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-lime-400 focus:ring-lime-400/20",value:null!=(eM=e1.bateriaObservaciones)?eM:"",onChange:e=>at("bateriaObservaciones",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"C\xf3digo cargador"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-lime-400 focus:ring-lime-400/20 font-mono",value:null!=(eT=e1.cargadorCodigo)?eT:"",onChange:e=>at("cargadorCodigo",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Estado cable"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-lime-400 focus:ring-lime-400/20",value:null!=(ez=e1.cargadorEstadoCable)?ez:"",onChange:e=>at("cargadorEstadoCable",e.target.value),placeholder:"Bueno, Da\xf1ado, Pelado..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Voltajes"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-lime-400 focus:ring-lime-400/20",value:null!=(eF=e1.cargadorVoltajes)?eF:"",onChange:e=>at("cargadorVoltajes",e.target.value),placeholder:"19V 3.42A"})]})]})}),(0,r.jsx)(B,{title:"Software y Licencias",subtitle:"Sistema operativo y aplicaciones",icon:q.A,iconColor:"text-blue-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Tipo SO"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",value:null!=(eR=e1.soTipo)?eR:"",onChange:e=>at("soTipo",e.target.value),placeholder:"Windows, Linux, macOS"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Versi\xf3n SO"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",value:null!=(eI=e1.soVersion)?eI:"",onChange:e=>at("soVersion",e.target.value),placeholder:"11 Pro, 10 Home..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Licencia SO"}),(0,r.jsx)(H,{value:e1.soLicenciaActiva,onChange:e=>at("soLicenciaActiva",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Antivirus"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",value:null!=(eL=e1.antivirusMarca)?eL:"",onChange:e=>at("antivirusMarca",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Licencia Antivirus"}),(0,r.jsx)(H,{value:e1.antivirusLicenciaActiva,onChange:e=>at("antivirusLicenciaActiva",e)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Versi\xf3n Office"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-blue-400 focus:ring-blue-400/20",value:null!=(eO=e1.officeVersion)?eO:"",onChange:e=>at("officeVersion",e.target.value),placeholder:"365, 2021, 2019..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Licencia Office"}),(0,r.jsx)(H,{value:e1.officeLicenciaActiva,onChange:e=>at("officeLicenciaActiva",e)})]})]})}),(0,r.jsx)(B,{title:"Datos y Respaldo",subtitle:"Informaci\xf3n del usuario",icon:M.A,iconColor:"text-rose-500",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Cantidad de informaci\xf3n"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-rose-400 focus:ring-rose-400/20",value:null!=(eP=e1.informacionCantidad)?eP:"",onChange:e=>at("informacionCantidad",e.target.value),placeholder:"50GB, 200GB..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{label:"Requiere respaldo"}),(0,r.jsx)(H,{value:e1.informacionRequiereRespaldo,onChange:e=>at("informacionRequiereRespaldo",e)})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)(V,{label:"Otros programas instalados"}),(0,r.jsx)(o.p,{className:"h-9 text-xs border-slate-200 focus:border-rose-400 focus:ring-rose-400/20",value:null!=(eD=e1.informacionOtrosProgramas)?eD:"",onChange:e=>at("informacionOtrosProgramas",e.target.value),placeholder:"AutoCAD, Photoshop, Visual Studio..."})]})]})}),(0,r.jsx)(B,{title:"Trabajo Realizado",subtitle:"Diagn\xf3stico y reparaciones",icon:p.A,iconColor:"text-indigo-600",children:(0,r.jsx)("textarea",{className:"w-full border border-slate-200 rounded-lg px-3 py-2.5 text-xs min-h-[100px] bg-white text-slate-900 placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/30 focus-visible:border-indigo-400 transition-all resize-none disabled:bg-slate-100 disabled:text-slate-600",value:null!=(eB=e1.trabajoRealizado)?eB:"",onChange:e=>at("trabajoRealizado",e.target.value),placeholder:"Describe detalladamente las acciones realizadas, repuestos cambiados, diagn\xf3sticos finales, recomendaciones, etc."})})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-slate-200 flex items-center justify-center animate-pulse mb-3",children:(0,r.jsx)(g.A,{className:"h-6 w-6 text-slate-400"})}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Iniciando formulario..."})]})}),e1&&!eG&&!e$&&(0,r.jsx)("footer",{className:"sticky bottom-0 z-20 border-t border-slate-200 bg-gradient-to-r from-white via-slate-50 to-white px-6 py-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100",children:aa&&!e4?(0,r.jsx)(x.A,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(g.A,{className:"h-4 w-4 text-slate-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-xs font-medium text-slate-700",children:["Ficha #",null!=(eV=e1.id)?eV:"Nueva",(0,r.jsx)("span",{className:"ml-2 text-[10px] px-2 py-0.5 rounded-full ".concat(aa?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:aa?"Cerrada":"Borrador"})]}),(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:aa&&!e4?"Ficha cerrada - Solo lectura":"Los cambios se guardar\xe1n al confirmar"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.$,{type:"button",variant:"outline",size:"sm",onClick:eJ,className:"h-10 px-4 border-slate-300 text-xs font-medium text-slate-600 hover:bg-slate-50",children:"Cancelar"}),(!aa||e4)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.$,{type:"button",variant:"outline",size:"sm",disabled:eQ||as,onClick:e=>{ai(e,"BORRADOR")},className:"h-10 px-4 border-amber-300 text-xs font-medium text-amber-700 hover:bg-amber-50",children:[eQ?(0,r.jsx)(n.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,r.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Guardar Borrador"]}),(0,r.jsxs)(l.$,{type:"button",size:"sm",disabled:eQ||as,onClick:()=>{e8(!0)},className:"flex h-10 items-center gap-2 bg-gradient-to-r from-green-600 to-green-700 px-5 text-xs font-medium text-white shadow-lg shadow-green-900/20 hover:from-green-500 hover:to-green-600 transition-all",children:[(0,r.jsx)(z.A,{className:"h-4 w-4"}),"Cerrar Ficha"]})]})]})]})}),e9&&(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-amber-100",children:(0,r.jsx)(F.A,{className:"h-6 w-6 text-amber-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"\xbfHabilitar edici\xf3n?"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Esta ficha est\xe1 cerrada"})]})]}),(0,r.jsx)("p",{className:"text-sm text-slate-600 mb-6",children:"La ficha t\xe9cnica ya fue cerrada. \xbfEst\xe1s seguro de que deseas habilitarla para edici\xf3n? Los cambios quedar\xe1n registrados."}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>e6(!1),className:"px-4",children:"Cancelar"}),(0,r.jsxs)(l.$,{onClick:()=>{e6(!1),e3(!0)},className:"bg-amber-600 hover:bg-amber-700 text-white px-4",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"S\xed, habilitar edici\xf3n"]})]})]})}),e7&&(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,r.jsx)(z.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"\xbfCerrar ficha t\xe9cnica?"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Esta acci\xf3n bloquear\xe1 la edici\xf3n"})]})]}),(0,r.jsx)("p",{className:"text-sm text-slate-600 mb-6",children:"Una vez cerrada, la ficha t\xe9cnica quedar\xe1 en modo solo lectura. Podr\xe1s habilitarla para edici\xf3n nuevamente si es necesario."}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>e8(!1),className:"px-4",children:"Cancelar"}),(0,r.jsxs)(l.$,{onClick:()=>{e8(!1),ai(void 0,"CERRADA")},className:"bg-green-600 hover:bg-green-700 text-white px-4",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"S\xed, cerrar ficha"]})]})]})})]})}):null}},6170:(e,a,s)=>{s.d(a,{p:()=>l});var r=s(5155);s(2115);var t=s(5016);function l(e){let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-white text-slate-900 px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 disabled:text-slate-600 disabled:bg-slate-100 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","dark:bg-slate-800 dark:text-slate-100 dark:disabled:bg-slate-700 dark:disabled:text-slate-300",a),...l})}},7003:(e,a,s)=>{s.d(a,{$:()=>n});var r=s(5155);s(2115);var t=s(2467),l=s(3101),o=s(5016);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:a,variant:s,size:l,asChild:n=!1,...c}=e,d=n?t.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:s,size:l,className:a})),...c})}},7161:(e,a,s)=>{s.d(a,{V:()=>g});var r=s(5155),t=s(2115),l=s(7003),o=s(6170),i=s(887),n=s(2508),c=s(4172),d=s(9451),u=s(5229),x=s(5299),m=s(523),h=s(6651),p=s(5917),b=s(1733);let g=e=>{let{open:a,clienteCedula:s,tecnicoCedula:g,ordenTrabajoId:f,onClose:v,onCreated:j}=e,[N,w]=(0,t.useState)([]),[y,C]=(0,t.useState)(!1),[A,S]=(0,t.useState)(!1),[E,k]=(0,t.useState)(""),[q,M]=(0,t.useState)(null),[T,z]=(0,t.useState)(!1),[F,R]=(0,t.useState)(null),I=(0,t.useRef)(null),L=(0,t.useRef)(null),O=localStorage.getItem("token");(0,t.useEffect)(()=>{a&&s&&O&&((async()=>{C(!0),R(null);try{let e=await fetch("".concat(b.JR,"/api/equipos/cliente/").concat(s),{headers:{Authorization:"Bearer ".concat(O)}});if(e.ok){let a=await e.json();w(Array.isArray(a)?a:a?[a]:[])}else if(404===e.status)w([]);else throw Error("Error al cargar equipos (HTTP ".concat(e.status,")"))}catch(e){console.error(e),w([])}finally{C(!1)}})(),M(null))},[a,s,O]),(0,t.useEffect)(()=>{let e=e=>{I.current&&!I.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let P=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"",D=N.filter(e=>{let a=P(E),s=e.hardwareJson||{};return P("".concat(e.marca," ").concat(e.modelo," ").concat(e.numeroSerie," ").concat(s["Nombre del computadora"]," ").concat(e.id)).includes(a)});N.find(e=>e.id===q);let B=async()=>{if(!q)return void R("Por favor selecciona un equipo");if(!O)return void R("No hay token de autenticaci\xf3n");z(!0),R(null);try{let r=new URLSearchParams;r.append("cedulaTecnico",g),r.append("equipoId",String(q)),f&&r.append("ordenTrabajoId",String(f)),r.append("observaciones","Ficha creada desde Orden de Trabajo");let t="".concat(b.JR,"/api/fichas?").concat(r.toString()),l=await fetch(t,{method:"POST",headers:{Authorization:"Bearer ".concat(O)}});if(!l.ok){let e=await l.text().catch(()=>null);throw Error(e||"Error creando ficha (HTTP ".concat(l.status,")"))}let o=null;try{let r=await l.clone().text();if(r)try{var e,a,s;let t=JSON.parse(r);o=null!=(s=null!=(a=null==t?void 0:t.id)?a:null==t||null==(e=t.data)?void 0:e.id)?s:null}catch(a){let e=parseInt(r,10);isNaN(e)||(o=e)}}catch(e){console.error("Error parseando respuesta",e)}if(!o){await new Promise(e=>setTimeout(e,800));let e=await fetch("".concat(b.JR,"/api/fichas"),{headers:{Authorization:"Bearer ".concat(O)}});if(e.ok){let a=await e.json();if(Array.isArray(a)){let e=a.filter(e=>Number(e.ordenTrabajoId)===Number(f));e.sort((e,a)=>a.id-e.id),e.length>0&&(o=e[0].id)}}}o?null==j||j(o):alert("Ficha creada, pero no se pudo abrir autom\xe1ticamente. Por favor recarga la lista."),v()}catch(e){console.error("Error creando ficha:",e),R((null==e?void 0:e.message)||"Error al conectar con el servidor")}finally{z(!1)}};return a?(0,r.jsx)("div",{className:"fixed inset-0 z-[95] flex items-center justify-center bg-black/70 backdrop-blur-sm",onMouseDown:e=>{e.target===e.currentTarget&&v()},children:(0,r.jsxs)("div",{className:"relative mx-3 w-full max-w-md rounded-2xl border border-slate-200 bg-white shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,r.jsx)("div",{className:"border-b border-slate-200 bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 px-5 py-4 shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-white",children:"Nueva Ficha T\xe9cnica"}),(0,r.jsxs)("p",{className:"text-[11px] text-slate-300",children:["Selecciona un equipo de la Orden #",f]})]}),(0,r.jsx)("button",{onClick:v,className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-black/35 text-white hover:bg-black/60","aria-label":"Cerrar",children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})}),(0,r.jsxs)("div",{className:"p-5 space-y-4 overflow-y-auto bg-slate-50 flex-1",children:[F&&(0,r.jsx)("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:F}),y?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 gap-3",children:[(0,r.jsx)(x.A,{className:"h-6 w-6 animate-spin text-slate-500"}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Cargando equipos del cliente..."})]}):0===N.length?(0,r.jsxs)("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-8 text-center",children:[(0,r.jsx)(m.A,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Sin equipos disponibles"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-600",children:"Este cliente no tiene equipos registrados."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative",ref:I,children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),(0,r.jsx)(o.p,{ref:L,placeholder:"Buscar por serie, modelo...",className:"pl-9 bg-white",value:E,onChange:e=>k(e.target.value),onFocus:()=>S(!0)})]})}),(0,r.jsx)("div",{className:"space-y-2",children:0===D.length?(0,r.jsx)("p",{className:"text-center text-xs text-slate-500 py-4",children:"No se encontraron equipos."}):D.map(e=>{var a,s;let t=q===e.id;return(0,r.jsxs)("div",{onClick:()=>M(e.id),className:"group relative flex cursor-pointer items-start gap-3 rounded-xl border p-3 transition-all duration-200 ".concat(t?"border-emerald-500 bg-emerald-50/50 ring-1 ring-emerald-500 shadow-sm":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-md"),children:[(0,r.jsx)("div",{className:"mt-0.5 rounded-lg p-2 shrink-0 transition-colors ".concat(t?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"),children:(e=>{let a=((e.hardwareJson||{})["Factor de forma nominal"]||"").toLowerCase(),s=(e.modelo||"").toLowerCase();return a.includes("laptop")||s.includes("laptop")||s.includes("tuf")?(0,r.jsx)(i.A,{className:"h-5 w-5"}):a.includes("phone")||s.includes("celular")?(0,r.jsx)(n.A,{className:"h-5 w-5"}):s.includes("server")||s.includes("poweredge")?(0,r.jsx)(c.A,{className:"h-5 w-5"}):(0,r.jsx)(d.A,{className:"h-5 w-5"})})(e)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex justify-between items-start",children:(0,r.jsxs)("p",{className:"text-sm font-bold text-slate-900 truncate pr-6",children:[e.marca," ",e.modelo]})}),(0,r.jsxs)("p",{className:"text-[11px] font-mono text-slate-500 truncate mt-0.5",children:["S/N: ",e.numeroSerie]}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[(null==(a=e.hardwareJson)?void 0:a["Nombre del computadora"])&&(0,r.jsx)("span",{className:"inline-flex px-1.5 py-0.5 rounded text-[10px] bg-indigo-50 text-indigo-700 border border-indigo-100",children:e.hardwareJson["Nombre del computadora"]}),(null==(s=e.hardwareJson)?void 0:s["Sistema operativo"])&&(0,r.jsx)("span",{className:"inline-flex px-1.5 py-0.5 rounded text-[10px] bg-slate-100 text-slate-600 border border-slate-200 truncate max-w-[150px]",children:e.hardwareJson["Sistema operativo"].split("Build")[0]})]})]}),t&&(0,r.jsx)("div",{className:"absolute top-3 right-3 flex h-5 w-5 items-center justify-center rounded-full bg-emerald-500 text-white shadow-sm animate-in zoom-in",children:(0,r.jsx)(p.A,{className:"h-3 w-3",strokeWidth:3})})]},e.id)})})]})]}),(0,r.jsx)("div",{className:"border-t border-slate-200 bg-white px-5 py-3 shrink-0",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-[10px] text-slate-400",children:q?"1 equipo seleccionado":"Ning\xfan equipo seleccionado"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.$,{type:"button",variant:"outline",size:"sm",onClick:v,className:"h-8 text-xs border-slate-300 text-slate-700",children:"Cancelar"}),(0,r.jsx)(l.$,{type:"button",size:"sm",disabled:!q||T,onClick:B,className:"h-8 text-xs transition-all ".concat(q?"bg-slate-900 text-white hover:bg-slate-800":"bg-slate-200 text-slate-400"),children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"mr-2 h-3 w-3 animate-spin"}),"Creando..."]}):"Crear Ficha"})]})]})})]})}):null}},7506:(e,a,s)=>{s.d(a,{D:()=>l});var r=s(1733);r.JR;let t=()=>{let e=localStorage.getItem("token");if(!e)throw Error("No hay token de autenticaci\xf3n");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},l={agregar:async(e,a,s)=>{let l=await fetch("".concat(r.JR,"/api/ordenes/").concat(e,"/costos"),{method:"POST",headers:t(),body:JSON.stringify({catalogoItemId:a,cantidad:Number(s)})});if(!l.ok)throw console.error("Backend error:",await l.text()),Error("Error al agregar costo a la orden")},listarPorOrden:async e=>{let a=await fetch("".concat(r.JR,"/api/ordenes/").concat(e,"/costos"),{headers:t()});if(!a.ok)throw Error("Error al listar costos");return a.json()},eliminar:async(e,a)=>{if(!(await fetch("".concat(r.JR,"/api/ordenes/").concat(e,"/costos/").concat(a),{method:"DELETE",headers:t()})).ok)throw Error("Error al eliminar costo")},actualizarCantidad:async(e,a)=>{if(!(await fetch("".concat(r.JR,"/api/ordenes/0/costos/").concat(e,"/cantidad"),{method:"PUT",headers:t(),body:JSON.stringify({cantidad:a})})).ok)throw Error("Error al actualizar cantidad")}}},7507:(e,a,s)=>{s.d(a,{bq:()=>u,eb:()=>m,gC:()=>x,l6:()=>c,yv:()=>d});var r=s(5155);s(2115);var t=s(5264),l=s(4033),o=s(5917),i=s(2108),n=s(5016);function c(e){let{...a}=e;return(0,r.jsx)(t.bL,{"data-slot":"select",...a})}function d(e){let{...a}=e;return(0,r.jsx)(t.WT,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:s="default",children:o,...i}=e;return(0,r.jsxs)(t.l9,{"data-slot":"select-trigger","data-size":s,className:(0,n.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...i,children:[o,(0,r.jsx)(t.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function x(e){let{className:a,children:s,position:l="popper",align:o="center",...i}=e;return(0,r.jsx)(t.ZL,{children:(0,r.jsxs)(t.UC,{"data-slot":"select-content",className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,align:o,...i,children:[(0,r.jsx)(h,{}),(0,r.jsx)(t.LM,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(p,{})]})})}function m(e){let{className:a,children:s,...l}=e;return(0,r.jsxs)(t.q7,{"data-slot":"select-item",className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...l,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(t.VF,{children:(0,r.jsx)(o.A,{className:"size-4"})})}),(0,r.jsx)(t.p4,{children:s})]})}function h(e){let{className:a,...s}=e;return(0,r.jsx)(t.PP,{"data-slot":"select-scroll-up-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"size-4"})})}function p(e){let{className:a,...s}=e;return(0,r.jsx)(t.wn,{"data-slot":"select-scroll-down-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.A,{className:"size-4"})})}},8369:(e,a,s)=>{s.d(a,{A:()=>n});var r=s(5155),t=s(2115),l=s(5299),o=s(8085),i=s(1733);function n(e){let{otId:a,open:s,onClose:n}=e,[c,d]=(0,t.useState)(""),[u,x]=(0,t.useState)(!1);if(!s)return null;let m=async()=>{if(c.trim()){x(!0);try{await (0,i.ff)("/api/notificaciones/ot/".concat(a),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({mensaje:c,tecnicoNombre:localStorage.getItem("nombreUsuario")||"T\xe9cnico"})}),alert("Enviado correctamente ✔️"),n()}catch(e){console.error(e),alert("Error al enviar")}finally{x(!1)}}};return(0,r.jsx)("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/60 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-md rounded-lg p-6 shadow-xl animate-fade-in",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Enviar notificaci\xf3n"}),(0,r.jsx)("textarea",{className:"w-full border rounded p-2",rows:4,placeholder:"Escribe el mensaje…",value:c,onChange:e=>d(e.target.value)}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancelar"}),(0,r.jsx)("button",{disabled:u,onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded flex items-center gap-2 disabled:bg-blue-300",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"h-4 w-4 animate-spin"})," Enviando…"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{className:"h-4 w-4"})," Enviar"]})})]})]})})}}}]);